<head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>




  <style>
    .boxShadow {
      -webkit-box-shadow: -9px -9px 8px -7px rgba(0, 0, 0, 0.43);
      -moz-box-shadow: -9px -9px 8px -7px rgba(0, 0, 0, 0.43);
      box-shadow: -9px -9px 8px -7px rgba(0, 0, 0, 0.43);
    }

    .curved-border {
      border: 2px solid #668F45;
      border-radius: 5px;
    }

    .tableFixHead {
      overflow-y: auto;
      height: 350px;
    }

    .tableFixHead thead th {
      position: sticky;
      top: 0;
    }

    table {
      border-collapse: collapse;
      width: 100%;
    }

    th,
    td {
      padding: 8px 16px;
    }

    th {
      background: #eee;
      z-index: 5;
    }

    .btn-circle {
      width: 30px;
      height: 30px;
      text-align: center;
      padding: 6px 0;
      font-size: 12px;
      line-height: 1.42;
      border-radius: 15px;
      margin-left: 5px;
    }

    .btn-color-c {
      background-color: #53B6CF;
    }

    .btn-color-a {
      background-color: #668F45;
    }

    .btn-color-r {
      background-color: #ff1736;
    }

    .btn-color-cl {
      background-color: #60c988;
    }

    .nav-color {
      background-color: #668F45;
      border-color: #668F45;
      color: #ffffff;
      text-align: center;
    }

    tr:hover {
      background-color: #5f9731;
      cursor: pointer;
    }

    ul li:active {
      background-color: #668F45;
    }

    .footer {
      position: relative;
      left: 0;
      bottom: 0;
      width: 100%;
      height: 30px;
      background-color: #668F45;
      color: white;
      text-align: center;
      margin-top: 3%;
    }

    th input {
      display: none;
    }

    .highlight {
      background: #5f9731;
      color: #ffffff;
      font-weight: bold;
    }

    .screen2_ul :hover {
      background-color: #668f45;
      color: #ffffff;
      font-weight: bold;
    }

    ul#menu li {
      display: inline;
    }

    .table tr.active td {
      background: #5f9731;
      color: #ffffff;
      font-weight: bold;
    }
  </style>
</head>

<body style="height: max-content;">

  <nav class="navbar navbar-inverse  nav-color" style="margin-bottom: 7px;font-family: Lato;">
    <div class="container-fluid nav-color">
      <div class="navbar-header" style="display: inline-block; ">
        <span style="float: left;font-size: 20px;padding-top: 10px;  ">
          <b>Siera Agro Company Private Limited</b>
        </span>
      </div>

    </div>
  </nav>


  <div class="container-fluid" style="margin-bottom: 5px;margin-top: 3px;">
    <div class="row">

      <div class="col-md-5">
        <div class="row" style="padding: 0px;">
          <div class="col-md-9">
            <h3 class="card-title" style="font-family: lato;margin-top:4px;margin-bottom:20px">Top 20 Selling Products (Last 7 days)
            </h3>
          </div>
          <div class="col-md-3">

            <button type="button" class="btn btn-default btn-color-c" style="margin-left: 3px;" (click)="newOrder()">New
              Order</button>
          </div>

        </div>
        <div class="card align-items-center" style="width: 100%;height:100%;">
          <div class="card-body">
            <div class="table-responsive tableFixHead">
              <table class="table table-bordered table-dark " id="best_products_table"
                style="font-family: 'Poppins', Lato;">
                <thead>
                  <tr>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Total Amount($)</th>

                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let product of products">
                    <td> {{ product.product_name }} </td>
                    <td> {{ product.quantity }} </td>
                    <td> {{ product.total_amount }} </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-5" style="margin-left: 10%;" *ngIf="viewNewOrder">
        <div class="row">
          <h2 class="card-title" style="font-family: lato;margin-top:4px;margin-bottom:20px">New Order</h2>
        </div>
        <div class="row">

          <div class="col-md-3">
            <h4>Order Date</h4>

          </div>
          <div class="col-md-6">

            <mat-form-field>
              <input matInput [matDatepicker]="picker" placeholder="Choose a date" [(ngModel)]="selectedDate">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
          </div>
        </div>

        <mat-divider></mat-divider>

        <div class="row">

          <div class="col-md-3">
            <h4>Product</h4>
          </div>

          <div class="col-md-6">
            <mat-form-field appearance="fill">
              <mat-label>Choose an option</mat-label>
              <select style="height:50px;" matNativeControl #selectList class="form-control"
                (change)="selectProduct(selectList.value)">
                <option value="" selected></option>
                <option *ngFor="let product of productList" class="dateSelect-option" value="{{product}}">{{product}}
                </option>

              </select>
            </mat-form-field>
          </div>
        </div>

        <mat-divider></mat-divider>

        <div class="row">

          <div class="col-md-3">
            <h4>Price</h4>
          </div>

          <div class="col-md-6">
            <p>{{selectedProductPrice}}</p>
          </div>
        </div>
        <mat-divider></mat-divider>


        <div class="row">

          <div class="col-md-3">
            <h4>Sale Price</h4>
          </div>

          <div class="col-md-6">
            <p>{{finalSalePrice}}</p>
          </div>
        </div>
        <mat-divider></mat-divider>

        <button type="button" class="btn btn-default btn-color-c" style="margin-left: 3px;margin-top:20px;"
          (click)="saveOrder()">Save</button>
        <button type="button" class="btn btn-default btn-color-c" style="margin-left: 3px;margin-top:20px;"
          (click)="cancelOrder()">Cancel</button>



      </div>
    </div>








    <div class="row">
      <h2 class="card-title" style="font-family: lato;margin-top:4px;margin-left: 40px;">High vs Low</h2>
    </div>

    <mat-grid-list style="margin-top: -2%;" cols="3" rowHeight="2:1">

      <mat-grid-tile>
        <mat-card>
          <mat-card-header>
            <mat-card-subtitle>TOTAL SALE TILL DATE</mat-card-subtitle>

            <mat-card-title>{{kpiTotalSales | number }}</mat-card-title>
          </mat-card-header>
        </mat-card>
      </mat-grid-tile>

      <mat-grid-tile>
        <mat-card>
          <mat-card-header>
            <mat-card-subtitle>HIGHEST SELLING PRODUCT</mat-card-subtitle>
            <mat-card-title>{{kpiBestSelling  }}</mat-card-title>
          </mat-card-header>
        </mat-card>
      </mat-grid-tile>

      <mat-grid-tile>
        <mat-card>
          <mat-card-header>
            <mat-card-subtitle>LOWEST SELLING PRODUCT</mat-card-subtitle>
            <mat-card-title>{{kpiLeastSelling  }}</mat-card-title>
          </mat-card-header>
        </mat-card>
      </mat-grid-tile>




    </mat-grid-list>

    <div class="row">
      <h2 class="card-title" style="font-family: lato;margin-top:4px;margin-left: 40px;">Sale in the last 3 months</h2>
    </div>

 


    <div class="row" style="margin-top: 3%;">
      <div class="col-md-5" style="margin-left: 2%;margin-top: 3%;">

        <div class="row">
  
          <div class="col-md-6">
            <h4>{{last3MonthSale[0]['month']}}</h4>
  
          </div>
          <div class="col-md-6">
  
            <h4>${{last3MonthSale[0]['sales']}}</h4>
  
          </div>
        </div>
  
        <mat-divider></mat-divider>
  
        <div class="row">
  
          <div class="col-md-6">
            <h4>{{last3MonthSale[1]['month']}}</h4>
  
          </div>
          <div class="col-md-6">
  
            <h4>${{last3MonthSale[1]['sales']}}</h4>
  
          </div>
        </div>
  
        <mat-divider></mat-divider>
  
        <div class="row">
  
          <div class="col-md-6">
            <h4>{{last3MonthSale[2]['month']}}</h4>
  
          </div>
          <div class="col-md-6">
  
            <h4>${{last3MonthSale[2]['sales']}}</h4>
  
          </div>
        </div>
        <mat-divider></mat-divider>
  
  
  
  
      </div>
      <div class="col-md-5">
          <div class="brand-card"
              style="width:100%;padding: 0.5px;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">
              <div class="brand-card-header">
                  <div class="caption caption-md" style="text-align:center;">

                      <span class="caption-subject font-green bold uppercase">
                          <h4> Quantity Vs Sale
                          </h4>
                      </span>

                  </div>
              </div>
              <div class="brand-card-body" style="height:350px;">
                  <div style="overflow: hidden;" [chart]="chart"></div>
              </div>
          </div>
      </div>


  </div>

  </div>

  <div class="loader"></div>
  <div class="footer" style="height: auto;">

    <br><br>
  </div>
</body>